# EC2の運用
  ## ライフサイクル
  - EC2インスタンスを起動してから終了するまでの状態遷移のこと
  - インスタンスの停止／起動時の挙動
    - インスタンスを停止すると、インスタンスは物理サーバー上から削除される
  　　 - 再びインスタンスを起動すると、停止前とは別の物理サーバー上で起動する。
  - インスタンス再起動時の挙動
    - マネジメントコンソールによる「再起動」は、OSからの再起動と同等の効果となるため、同じ物理サーバーが保持される 
    - ほとんどの場合、インスタンスのパブリックDNS/IP、インスタンスストアのデータも引き続き利用できる
  - インスタンス停止時のEBSやEIPの挙動
    - インスタンスを終了する際の設定によって、EBSやEIPリソースの残る／残らないが決まる
      - EBSも合わせて削除する⇨EBSも削除するかどうかは、インスタンス作成時の「ストレージ (ボリューム)」で設定できる
      - EIPを解放する⇨Elastic IPアドレスの関連付けの解除」を行ってから「Elastic IPアドレスの解放」を行う
    
  ## スケジュールイベント
  - Instance stop
    - インスタンスが停止する
    - 再起動すると、別の物理サーバーへ移行される
  - Instance retirement
    - Instance Store-Backed AMIの場合：Instance Storeによってバックアップされた後、削除される
    - EBS-Backed AMIの場合：Amazon EBSによってバックアップされた後、停止する
  - Instance reboot
    - Amazon EBSによってバックアップされた後、停止する
  - Auto Recovery
    - AWSでは、実行中のEC2インスタンスに対して、定期的にステータスチェック（監視）を行っており、システムステータスが失敗（Status Checked 
      Failed）となった場合に、自動的にEC2インスタンスを復旧させる機能
    - システムステータスチェック（StatusCheckFailed_System）：
      - ネットワーク接続の喪失
      - システム電源の喪失
      - 物理ホストのソフトウェアの問題
      - ネットワーク到達可能性に影響する、物理ホスト上のハードウェアの問題
    - インスタンスステータスチェック（StatusCheckFailed_Instance）：EC2インスタンス内部で発生している障害。ユーザーが関与して修復する必要  
      がある
      - 誤ったネットワーク設定や起動設定
      - メモリの枯渇
      - ファイルシステムの破損
    - ステータスチェック失敗の結果は、Amazon CloudWatchのアラームで検知できる
      - メトリクス:監視項目のこと
        - 標準メトリクス：CPU使用率、Disk利用量、ネットワーク利用量などを監視する
        - カスタムメトリクス：標準メトリクスでは収集できない項目を独自に定義できる

  ## 自動化ツールと機能
  - User Data（ユーザーデータ）:ルーティン処理を自動で実行できる機能
  - Instance Metadata（インスタンスメタデータ）:実行中のEC2インスタンスに関するデータを取得する機能
  - Launch Template（起動テンプレート）:EC2インスタンスを起動するための情報を、テンプレートとして保存できるサービス
